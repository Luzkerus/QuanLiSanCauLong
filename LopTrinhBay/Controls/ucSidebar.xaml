<UserControl x:Class="QuanLiSanCauLong.LopTrinhBay.ManHinh.Controls.ucSidebar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="720" d:DesignWidth="220"
             x:Name="Root"
             Width="220"
             Background="White">

    <!-- ================= Resources ================= -->
    <UserControl.Resources>
        <SolidColorBrush x:Key="ColText"   Color="#21382D"/>
        <SolidColorBrush x:Key="ColBorder" Color="#E6EFEA"/>
        <SolidColorBrush x:Key="ColActiveBg" Color="#0FBF84"/>

        <!-- Item đang chọn -->
        <Style x:Key="MenuItemActive" TargetType="Border">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Background" Value="{StaticResource ColActiveBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ColActiveBg}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="6,4,6,0"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Item bình thường -->
        <Style x:Key="MenuItemNormal" TargetType="Border">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{StaticResource ColBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="6,4,6,0"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F0FFFA"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Label menu: ẩn khi thu nhỏ -->
        <Style x:Key="MenuLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{StaticResource ColText}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="4,0,0,0"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsExpanded, ElementName=Root}" Value="False">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Text logo / admin ẩn khi thu nhỏ -->
        <Style x:Key="CollapseWithSidebar" TargetType="TextBlock">
            <Setter Property="Visibility" Value="Visible"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsExpanded, ElementName=Root}" Value="False">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Border phụ ẩn khi thu nhỏ -->
        <Style x:Key="CollapseBorderWithSidebar" TargetType="Border">
            <Setter Property="Visibility" Value="Visible"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsExpanded, ElementName=Root}" Value="False">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <!-- ================= Layout chính ================= -->
    <Grid>
        <!-- Thân sidebar -->
        <Border Background="White"
                BorderBrush="{StaticResource ColBorder}"
                BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- ===== Row 0: Logo ===== -->
                <StackPanel Grid.Row="0"
                            Orientation="Horizontal"
                            Margin="10,10,10,6"
                            VerticalAlignment="Center">
                    <!-- Logo tròn -->
                    <Ellipse Width="42" Height="42">
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="/LopTrinhBay/TaiNguyen/Logo/sancaulongcuchi-logo.png"
                        Stretch="UniformToFill"/>
                        </Ellipse.Fill>
                    </Ellipse>
                    <StackPanel Margin="8,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="Sân Cầu Lông"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Style="{StaticResource CollapseWithSidebar}"/>
                        <TextBlock Text="Củ Chi"
                                   Foreground="#888"
                                   FontSize="16"
                                   Style="{StaticResource CollapseWithSidebar}"/>
                    </StackPanel>
                </StackPanel>

                <!-- ===== Row 1: Menu ===== -->
                <StackPanel Grid.Row="1" Margin="4,4,4,0">

                    <!-- Tổng quan -->
                    <Border x:Name="Item_Overview"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="overview"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📊"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Tổng quan"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Quản lý sân -->
                    <Border x:Name="Item_Courts"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="courts"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🏆"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Quản lý sân"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Đặt sân -->
                    <Border x:Name="Item_Booking"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="booking"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📅"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Đặt sân"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Khách hàng -->
                    <Border x:Name="Item_Customers"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="customers"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="👤"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Khách hàng"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Thanh toán -->
                    <Border x:Name="Item_Payment"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="payment"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="💳"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Thanh toán"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Kho & POS -->
                    <Border x:Name="Item_POS"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="pos"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🧾"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Kho &amp; POS"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Nhân viên -->
                    <Border x:Name="Item_Staff"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="staff"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🧑‍💼"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Nhân viên"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Báo cáo -->
                    <Border x:Name="Item_Reports"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="reports"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📈"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Báo cáo"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>

                    <!-- Cài đặt -->
                    <Border x:Name="Item_Settings"
                            Style="{StaticResource MenuItemNormal}"
                            Tag="settings"
                            MouseLeftButtonDown="MenuItem_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚙"
                                       Margin="4,0,8,0"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="Cài đặt"
                                       Style="{StaticResource MenuLabelStyle}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- ===== Row 2: Admin info ===== -->
                <Border Grid.Row="2"
                        Margin="10,8,10,12"
                        Padding="12"
                        BorderBrush="{StaticResource ColBorder}"
                        BorderThickness="1"
                        CornerRadius="12">
                    <DockPanel>
                        <Ellipse Width="32" Height="32" Fill="#2BB673" DockPanel.Dock="Left"/>

                        <StackPanel Margin="10,0,0,0"
                                    VerticalAlignment="Center">
                            <TextBlock Text="{Binding AdminName, ElementName=Root, FallbackValue=Admin User}"
                                       FontWeight="SemiBold"
                                       Style="{StaticResource CollapseWithSidebar}"/>
                            <TextBlock Text="{Binding AdminRole, ElementName=Root, FallbackValue=Quản lý}"
                                       Foreground="#889"
                                       FontSize="12"
                                       Style="{StaticResource CollapseWithSidebar}"/>
                        </StackPanel>

                        <Border HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                CornerRadius="12"
                                BorderThickness="1"
                                BorderBrush="{StaticResource ColBorder}"
                                Padding="6,4"
                                Margin="8,0,0,0"
                                Style="{StaticResource CollapseBorderWithSidebar}">
                            <TextBlock Text="↦" />
                        </Border>
                    </DockPanel>
                </Border>
            </Grid>
        </Border>

        <!-- ===== Nút toggle tròn, nằm ngoài mép phải ===== -->
        <Button x:Name="BtnToggle"
                Width="38" Height="38"
                Click="BtnToggle_Click"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,12,-45,0"
                Background="Transparent"
                BorderThickness="0"
                Cursor="Hand">

            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <!-- Nền tròn trắng -->
                        <Ellipse x:Name="BaseCircle"
                         Fill="White"/>

                        <!-- Viền xanh chỉ hiện khi hover -->
                        <Ellipse x:Name="HoverRing"
                         Fill="Transparent"
                         Stroke="#0FBF84"
                         StrokeThickness="1.6"
                         Opacity="0"/>

                        <!-- Icon 3 gạch -->
                        <StackPanel Orientation="Vertical"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                            <Rectangle Height="3" Width="17"
                               Fill="#222"
                               RadiusX="1.5" RadiusY="1.5"
                               Margin="0,0,0,4"/>
                            <Rectangle Height="3" Width="17"
                               Fill="#222"
                               RadiusX="1.5" RadiusY="1.5"
                               Margin="0,0,0,4"/>
                            <Rectangle Height="3" Width="17"
                               Fill="#222"
                               RadiusX="1.5" RadiusY="1.5"/>
                        </StackPanel>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Hover: hiện viền xanh -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="HoverRing"
                            Property="Opacity"
                            Value="1"/>
                        </Trigger>

                        <!-- Nhấn chuột: nền hơi xanh nhạt -->
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="BaseCircle"
                            Property="Fill"
                            Value="#E6FFF5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>
</UserControl>
