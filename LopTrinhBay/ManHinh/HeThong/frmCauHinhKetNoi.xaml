<Window x:Class="QuanLiSanCauLong.LopTrinhBay.ManHinh.HeThong.frmCauHinhKetNoi"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cấu hình kết nối CSDL"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Height="450" Width="620"
        Background="#F6FDF9"
        FontFamily="Segoe UI">

    <!-- ====== RESOURCES RIÊNG CHO FORM NÀY ====== -->
    <Window.Resources>
        <!-- Palette giống app của bạn -->
        <SolidColorBrush x:Key="ColText"   Color="#21382D"/>
        <SolidColorBrush x:Key="ColSub"    Color="#6B7E74"/>
        <SolidColorBrush x:Key="ColCard"   Color="#FFFFFF"/>
        <SolidColorBrush x:Key="ColLine"   Color="#E1E7E5"/>

        <SolidColorBrush x:Key="Accent"        Color="#0FBF84"/>
        <SolidColorBrush x:Key="AccentHover"   Color="#0DAA78"/>
        <SolidColorBrush x:Key="AccentSoft"    Color="#E6F8F1"/>

        <!-- Card bo tròn + shadow nhẹ -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource ColCard}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ColLine}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="14"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="8"
                                      ShadowDepth="1"
                                      Opacity="0.08"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tiêu đề -->
        <Style x:Key="TitleText" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ColText}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- Text phụ -->
        <Style x:Key="SubText" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ColSub}"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- Nút chính màu xanh -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Padding" Value="14,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background"
                                        Value="{StaticResource AccentHover}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.6"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- ============ LAYOUT ============ -->
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ===== HEADER ===== -->
        <StackPanel Grid.Row="0" Margin="0,0,0,4">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">

                <!-- Tiêu đề -->
                <TextBlock Text="Cấu hình kết nối SQL Server"
                           Style="{StaticResource TitleText}"/>
            </StackPanel>

            <!-- Mô tả -->
            <TextBlock Text="Nhập thông tin server và database SQL trên máy để phần mềm kết nối và chạy dữ liệu."
                       Style="{StaticResource SubText}"
                       Margin="0,2,0,0"
                       TextWrapping="Wrap"/>
        </StackPanel>


        <!-- ===== CARD NỘI DUNG ===== -->
        <Border Grid.Row="1"
                Margin="0,16,0,16"
                Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Nhóm thông tin cơ bản -->
                <StackPanel Grid.Row="0" Margin="0,0,0,12">
                    <TextBlock Text="Thông tin server"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource ColText}"/>
                    <TextBlock Text="Ví dụ: Server = .\SQLEXPRESS hoặc localhost; Database = QuanLiSanCauLong"
                               Margin="0,2,0,0"
                               Style="{StaticResource SubText}"/>
                </StackPanel>

                <!-- Form hai cột -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Server -->
                    <TextBlock Grid.Row="0" Grid.Column="0"
                               Text="Tên server"
                               FontSize="14"
                               Margin="0,0,12,8"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource ColSub}"/>
                    <TextBox Grid.Row="0" Grid.Column="1"
                             x:Name="txtServer"
                             FontSize="14"
                             Margin="0,0,0,8"
                             Height="32"
                             VerticalContentAlignment="Center"/>

                    <!-- Database -->
                    <TextBlock Grid.Row="1" Grid.Column="0"
                               Text="Tên database"
                               FontSize="14"
                               Margin="0,0,12,8"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource ColSub}"/>
                    <TextBox Grid.Row="1" Grid.Column="1"
                             x:Name="txtDatabase"
                             FontSize="14"
                             Margin="0,0,0,8"
                             Height="32"
                             VerticalContentAlignment="Center"/>

                    <!-- Windows Auth -->
                    <CheckBox Grid.Row="2" Grid.ColumnSpan="2"
                              x:Name="chkWindowsAuth"
                              Content="Sử dụng Windows Authentication (không cần nhập User/Password)"
                              Margin="0,4,0,8"
                              Checked="chkWindowsAuth_Checked"
                              Unchecked="chkWindowsAuth_Checked"
                              Foreground="{StaticResource ColSub}"/>

                    <!-- User -->
                    <TextBlock Grid.Row="3" Grid.Column="0"
                               Text="User SQL"
                               FontSize="14"
                               Margin="0,0,12,8"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource ColSub}"/>
                    <TextBox Grid.Row="3" Grid.Column="1"
                             x:Name="txtUser"
                             FontSize="14"
                             Margin="0,0,0,8"
                             Height="32"
                             VerticalContentAlignment="Center"/>

                    <!-- Password -->
                    <TextBlock Grid.Row="4" Grid.Column="0"
                               Text="Password"
                               FontSize="14"
                               Margin="0,0,12,0"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource ColSub}"/>
                    <PasswordBox Grid.Row="4" Grid.Column="1"
                                 x:Name="txtPassword"
                                 FontSize="14"
                                 Height="32"
                                 VerticalContentAlignment="Center"/>
                </Grid>
            </Grid>
        </Border>

        <!-- ===== FOOTER / NÚT ===== -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Nút -->
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button Content="Test kết nối"
                        Width="120"
                        Margin="0,0,8,0"
                        Click="BtnTest_Click"
                        Style="{StaticResource PrimaryButton}"/>
                <Button Content="Lưu"
                        Width="90"
                        Margin="0,0,8,0"
                        Click="BtnSave_Click"
                        Style="{StaticResource PrimaryButton}"/>
                <Button Content="Hủy"
                        Width="80"
                        Cursor="Hand"
                        Background="#E53935"
                        Foreground="White"
                        BorderThickness="0"
                        Padding="12,6"
                        Margin="0,0,0,0">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bd"
                                CornerRadius="8"
                                Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bd"
                                        Property="Background"
                                        Value="#D32F2F"/>
                                                <!-- Đỏ đậm hơn -->
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

            </StackPanel>
        </Grid>
    </Grid>
</Window>
