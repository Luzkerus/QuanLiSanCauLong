<Window x:Class="QuanLiSanCauLong.LopTrinhBay.ManHinh.QuanLySan.frmCauHinhGia"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Cấu hình giá" Height="650" Width="900"
        MinWidth="880" MinHeight="600"
        Background="#F6FDF9"
        WindowStartupLocation="CenterScreen">

    <!-- ============ RESOURCES ============ -->
    <Window.Resources>
        <SolidColorBrush x:Key="ColText" Color="#21382D"/>
        <SolidColorBrush x:Key="ColSub"  Color="#6B7E74"/>
        <SolidColorBrush x:Key="ColCard" Color="White"/>

        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource ColCard}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="1" Opacity="0.15"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="NumBox" TargetType="TextBox">
            <Setter Property="Margin" Value="0,6,0,0"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style x:Key="Lbl" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ColText}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <!-- Button style bo góc -->
        <Style x:Key="PrimaryBtn" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#0FBF84"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GhostBtn" TargetType="Button">
            <Setter Property="Foreground" Value="{StaticResource ColText}"/>
            <Setter Property="Background" Value="#EAF3EF"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ============ HEADER ============ -->
        <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,12">
            <StackPanel Orientation="Vertical" DockPanel.Dock="Left">
                <TextBlock Text="Cấu hình giá" FontSize="22" FontWeight="Bold" Foreground="{StaticResource ColText}"/>
                <TextBlock Text="Đồng giá theo giờ + phụ thu lễ/cuối tuần" Foreground="{StaticResource ColSub}"/>
            </StackPanel>
        </DockPanel>

        <!-- ============ LƯU Ý ============ -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}">
            <StackPanel>
                <TextBlock Text="Lưu ý" FontWeight="Bold" Foreground="{StaticResource ColText}"/>
                <TextBlock Margin="0,6,0,0" Foreground="{StaticResource ColSub}">
                    Hệ thống áp dụng đồng giá cho tất cả sân. Nếu rơi vào ngày lễ hoặc cuối tuần,
                    giá sẽ tự động cộng thêm tỷ lệ phụ thu cấu hình bên dưới.
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- ============ FORM CẤU HÌNH ============ -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- CẤU HÌNH GIÁ -->
            <Border Grid.Column="0" Style="{StaticResource CardStyle}" Margin="0,0,12,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="0,0,0,12">
                        <TextBlock Text="Giá cơ bản (VNĐ/giờ)" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="txtGiaCoBan"
                                 Style="{StaticResource NumBox}"
                                 PreviewTextInput="Numeric_PreviewTextInput"
                                 TextChanged="AnyInput_TextChanged"
                                 ToolTip="Nhập số tiền theo VNĐ/giờ (ví dụ 120000)"/>
                    </StackPanel>

                    <StackPanel Grid.Row="1" Margin="0,0,0,12">
                        <TextBlock Text="Phụ thu lễ/ cuối tuần (%)" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="txtPhuThu"
                                 Style="{StaticResource NumBox}"
                                 PreviewTextInput="Numeric_PreviewTextInput"
                                 TextChanged="AnyInput_TextChanged"
                                 ToolTip="Áp dụng cho cả ngày lễ và cuối tuần"/>
                    </StackPanel>

                    <StackPanel Grid.Row="2">
                        <TextBlock Foreground="{StaticResource ColSub}">
                            * Ví dụ: nhập 5 nghĩa là cộng thêm 5% vào giá cơ bản cho ngày lễ hoặc cuối tuần.
                        </TextBlock>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ÁP DỤNG HÔM NAY -->
            <Border Grid.Column="1" Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Áp dụng hôm nay" FontWeight="Bold" Foreground="{StaticResource ColText}"/>

                    <Grid Margin="0,10,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Width="140" Foreground="{StaticResource ColSub}">Hôm nay</TextBlock>
                            <TextBlock x:Name="lblToday" FontWeight="SemiBold" Foreground="{StaticResource ColText}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Width="140" Foreground="{StaticResource ColSub}"><Run Text="Lễ/cuối tuần"/></TextBlock>
                            <Border x:Name="badgeSpecial" Padding="8,4" CornerRadius="8" Background="#EAF3EF" Width="24">
                                <TextBlock x:Name="lblSpecial" FontWeight="SemiBold"/>
                            </Border>
                        </StackPanel>

                        <Border Grid.Row="2" Padding="12" CornerRadius="10" Background="#F0FFF9">
                            <StackPanel>
                                <TextBlock Text="Giá áp dụng (VNĐ/giờ)" Foreground="{StaticResource ColSub}"/>
                                <TextBlock x:Name="lblGiaApDung" FontSize="22" FontWeight="Bold" Foreground="{StaticResource ColText}"/>
                                <TextBlock x:Name="lblGiaFormula" Margin="0,6,0,0" Foreground="{StaticResource ColSub}" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>

        <!-- ACTION BUTTONS -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Lưu cấu hình" Style="{StaticResource PrimaryBtn}" Click="BtnSave_Click"/>
            <Button Content="Khôi phục mặc định" Style="{StaticResource GhostBtn}" Click="BtnReset_Click"/>
            <Button Content="Đóng" Style="{StaticResource GhostBtn}" Click="BtnClose_Click"/>
        </StackPanel>
    </Grid>
</Window>
